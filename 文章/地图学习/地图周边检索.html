<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>åœ°å›¾</title>
    <style type="text/css">
      html,
      body,
      .bmap {
        height: 100%;
        width: 100%;
      }
    </style>
    <script src="https://api.map.baidu.com/api?type=webgl&v=1.0&ak=2fNpWlpStH5BTSAdGI4piuql45LiLCc6"></script>
  </head>

  <body>
    <button onclick="onBut()">ä¸‹ä¸€é¡µ</button>
    <div id="bmap" class="bmap"></div>
    <div id="r-result"></div>
    <script>
      var map = new BMapGL.Map('bmap') // åˆ›å»ºMapå®ä¾‹
      // åˆå§‹åŒ–åœ°å›¾,è®¾ç½®ä¸­å¿ƒç‚¹åæ ‡å’Œåœ°å›¾çº§åˆ«
      map.centerAndZoom(new BMapGL.Point(121.480509, 31.23592), 10)
      // å¯ç”¨ é¼ æ ‡æ»šè½®äº‹ä»¶
      map.enableScrollWheelZoom()

      // æ€»é¡µæ•°
      var pageAll = 0
      var myKeys = ['é…’åº—', 'åŒ»é™¢']
      var local = new BMapGL.LocalSearch(map, {
        renderOptions: { map: map, panel: 'r-result' },
        onSearchComplete: function (res) {
          console.log('ğŸš€ ~ file: åœ°å›¾å‘¨è¾¹æ£€ç´¢.html ~ line 35 ~ res', res)
          pageAll = res[0].getNumPages()
        }
      })
      local.setPageCapacity(20)
      local.search(myKeys)

      var i = 0 // é¡µæ•°
      function onBut() {
        if (i === pageAll) {
          i = 0
        } else {
          i++
        }
        local.gotoPage(i)
      }
    </script>
  </body>
</html>
